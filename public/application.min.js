/*! learning-emberjs 2013-12-12 */
Todos=Ember.Application.create(),Todos.ApplicationAdapter=DS.LSAdapter.extend({namespace:"todos-emberjs"}),window.Todos=Todos,Todos.Router.map(function(){this.resource("todos",{path:"/"},function(){this.route("active"),this.route("completed")})}),Todos.TodosRoute=Ember.Route.extend({model:function(){return this.store.find("todo")}}),Todos.TodosIndexRoute=Ember.Route.extend({model:function(){return this.modelFor("todos")}}),Todos.TodosActiveRoute=Ember.Route.extend({model:function(){return this.store.filter("todo",function(a){return!a.get("isCompleted")})},renderTemplate:function(a){this.render("todos/index",{controller:a})}}),Todos.TodosCompletedRoute=Ember.Route.extend({model:function(){return this.store.filter("todo",function(a){return a.get("isCompleted")})},renderTemplate:function(a){this.render("todos/index",{controller:a})}}),Todos.TodoController=Ember.ObjectController.extend({actions:{editTodo:function(){this.set("isEditing",!0)},acceptChanges:function(){this.set("isEditing",!1),Ember.isEmpty(this.get("model.title"))?this.send("removeTodo"):this.get("model").save()},removeTodo:function(){var a=this.get("model");a.deleteRecord(),a.save()}},isEditing:!1,isCompleted:function(a,b){var c=this.get("model");return void 0===b?c.get("isCompleted"):(c.set("isCompleted",b),c.save(),b)}.property("model.isCompleted")}),Todos.TodosController=Ember.ArrayController.extend({actions:{createTodo:function(){var a=this.get("newTitle");if(a.trim()){var b=this.store.createRecord("todo",{title:a,isCompleted:!1});this.set("newTitle",""),b.save()}},clearCompleted:function(){var a=this.filterBy("isCompleted",!0);a.invoke("deleteRecord"),a.invoke("save")}},remaining:function(){return this.filterBy("isCompleted",!1).get("length")}.property("@each.isCompleted"),inflection:function(){var a=this.get("remaining");return 1===a?"item":"items"}.property("remaining"),completed:function(){return this.filterBy("isCompleted",!0).get("length")}.property("@each.isCompleted"),hasCompleted:function(){return this.get("completed")>0}.property("completed"),allAreDone:function(a,b){return void 0===b?!!this.get("length")&&this.everyBy("isCompleted",!0):(this.setEach("isCompleted",b),this.invoke("save"),b)}.property("@each.isCompleted")}),Todos.Todo=DS.Model.extend({title:DS.attr("string"),isCompleted:DS.attr("boolean")}),Todos.EditTodoView=Ember.TextField.extend({didInsertElement:function(){this.$().focus()}}),Ember.Handlebars.helper("edit-todo",Todos.EditTodoView);